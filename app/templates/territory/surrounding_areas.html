<div class="col col-md-12">

    <div class="table-responsive table-responsive-sm">
        <table id="surroundingAreasTable" class="table table-striped table-hover table-sm">
            <thead class="thead-dark">
            <tr>
                <th><i class="fas fa-plus-circle"></i></th>
                <th>Type</th>
                <th>Code</th>
                <th>Nom</th>
            </tr>
            </thead>
            <tbody>
            {% for a in surrounding_areas %}
                <tr data-typecode="{{ a.type_code.lower() }}" data-areacode="{{ a.area_code }}">
                    <td>
                        <a data-toggle="tooltip"
                           href="{{ url_for('rendered.territory', type_code=a.type_code.lower(), area_code=a.area_code ) }}"
                           title="Voir la fiche de ce territoire"><i
                                class="fa fa-link"></i></a></td>
                    <td>{{ a.type_name }}</td>
                    <td><strong>{{ a.area_code }}</strong></td>
                    <td>{{ a.area_name }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{#<div class="col col-md-6">#}
{#    <div id="surroundingAreasMap" class="card"></div>#}
{#</div>#}
<script>
    var surroundingAreasTable = $("#surroundingAreasTable").DataTable({
        scrollY: '300px',
        scrollCollapse: true,
        paging: false,
        language: {
            "sEmptyTable": "Aucune donnée disponible dans le tableau",
            "sInfo": "Affichage de l'élément _START_ à _END_ sur _TOTAL_ éléments",
            "sInfoEmpty": "Affichage de l'élément 0 à 0 sur 0 élément",
            "sInfoFiltered": "(filtré à partir de _MAX_ éléments au total)",
            "sInfoPostFix": "",
            "sInfoThousands": ",",
            "sLengthMenu": "Afficher _MENU_ éléments",
            "sLoadingRecords": "Chargement...",
            "sProcessing": "Traitement...",
            "sSearch": "Rechercher :",
            "sZeroRecords": "Aucun élément correspondant trouvé",
            "oAria": {
                "sSortAscending": ": activer pour trier la colonne par ordre croissant",
                "sSortDescending": ": activer pour trier la colonne par ordre décroissant"
            },
        },
    });
    var surroundingAreasMap = baseMap('surroundingAreasMap');

    var surroundingArea = null;
    {##}
    {#$('#surroundingAreasTable').on('click', 'tr', function () {#}
    {#    type_code = $(this).data("typecode");#}
    {#    area_code = $(this).data("areacode");#}
    {#    console.log(surroundingAreasMap.hasLayer(surroundingArea));#}
    {#    if (surroundingAreasMap.hasLayer(surroundingArea)) {#}
    {#        console.log('removeLayer');#}
    {#        surroundingAreasMap.removeLayer(surroundingArea);#}
    {#    };#}
    {#    axios#}
    {#        .get('/api/geom/' + type_code + '/' + area_code)#}
    {#        .then(function (response) {#}
    {#            var surroundingArea = L.geoJson(response.data, {#}
    {#                style: territoryStyle#}
    {#            });#}
    {#            surroundingAreasMap.addLayer(surroundingArea);#}
    {#            surroundingAreasMap.flyToBounds(surroundingArea.getBounds());#}
    {##}
    {#        })#}
    {#        .catch(function (error) {#}
    {#            console.log('<getTerritoryArea> Error', error);#}
    {#        });#}
    {#})
    ;
    #}


</script>